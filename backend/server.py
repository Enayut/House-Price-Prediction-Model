from flask import Flask, request, jsonify
import numpy as np
import pandas as pd
import json
import joblib
from flask_cors import CORS



app = Flask(__name__)
CORS(app)
model = joblib.load('model.pkl')

@app.route('/predict', methods=['POST'])
def predict_house_price():
    data = request.json
    Location,Area,bhk,Gymnasium,Lift = data['location'], int(data['area']), int(data['bhk']), int(data['gym']), int(data['lift'])
    loc = {'Kharghar': 136, 'Sector-13 Kharghar': 288, 'Sector 18 Kharghar': 262, 'Sector 20 Kharghar': 269, 'Sector 15 Kharghar': 258, 'Dombivali': 67, 'Churchgate': 51, 'Prabhadevi': 230, 'Jogeshwari West': 107, 'Kalyan East': 114, 'Malad East': 169, 'Virar East': 374, 'Virar': 373, 'Malad West': 170, 'Borivali East': 38, 'Mira Road East': 179, 'Goregaon West': 86, 'Kandivali West': 119, 'Borivali West': 39, 'Kandivali East': 118, 'Andheri East': 14, 'Goregaon East': 85, 'Wadala': 379, 'Ulwe': 348, 'Dahisar': 55, 'kandivali': 394, 'Goregaon': 83, 'Bhandup West': 30, 'thakur village kandivali east': 406, 'Santacruz West': 246, 'Kanjurmarg': 120, 'I C Colony': 101, 'Dahisar W': 57, 'Marol': 175, 'Parel': 216, 'Lower Parel': 157, 'Worli': 386, 'Jogeshwari East': 106, 'Chembur Shell Colony': 50, 'Central Avenue': 43, 'Chembur East': 49, 'Diamond Market Road': 63, 'Mulund': 182, 'Nalasopara West': 193, 'raheja vihar': 401, 'Powai Lake': 229, 'MHADA Colony 20': 159, 'Tolaram Colony': 346, 'Taloja': 333, 'Thane West': 342, 'Vangani': 353, 'Sector 5 Ulwe': 282, 'Sector12 New Panvel': 303, 'Sector 17 Ulwe': 259, 'Sector9 Kamothe': 311, 'Sector 19 Kharghar': 264, 'Navi Basti': 196, 'Sector12 Kamothe': 302, 'Sector 21 Kamothe': 270, 'Rutu Enclave': 238, 'taloja panchanand': 405, 'Virar West': 375, 'Chembur': 48, 'Sector 20 Kamothe': 268, 'Sector 22 Kamothe': 273, 'Sector 18 Kamothe': 261, 'Sector-5 Kamothe': 295, 'Sector-6A Kamothe': 297, 'Sector 11 Kamothe': 253, 'Sector-18 Ulwe': 289, 'Sector-12 Kamothe': 287, 'azad nagar': 390, 'Sindhi Society Chembur': 324, 'Kurla': 151, 'Sahkar Nagar': 239, 'Deonar': 60, 'Thane': 340, 'Jankalyan Nagar': 103, 'Badlapur': 19, 'Ambarnath': 7, 'Ambernath West': 9, 'Vakola': 351, 'Kamothe': 116, 'Kamothe Sector 16': 117, 'Almeida Park': 6, 'Khar': 133, 'Bandra West': 25, 'Pali Hill': 209, '15th Road': 0, 'Palghar': 208, 'Sector13 Kharghar': 305, 'Sector 21 Kharghar': 271, 'Sector 12 Kharghar': 256, 'Vivek Vidyalaya Marg': 378, 'Vasai east': 357, 'Nahur': 189, 'Badlapur West': 21, 'Panvel': 215, 'Kalyan': 113, 'Badlapur East': 20, 'Mira Bhayandar': 177, 'Juhu': 108, 'Naigaon East': 190, 'Sector 21 Ulwe': 272, 'Bandra East': 23, 'Dronagiri': 70, 'Nerul': 199, 'Karanjade': 125, 'Sanpada': 244, 'Sector-8 Ulwe': 299, 'Sector-3 Ulwe': 292, 'Sector 23 Ulwe': 274, 'ULWE SECTOR 19': 347, 'Ghodbunder Road': 80, 'Bhiwandi': 34, 'Vasai': 355, 'Nala Sopara': 191, 'Dadar East': 53, 'Ghatkopar': 77, 'Breach Candy': 40, 'Worli South Mumbai': 387, 'Asangaon': 18, 'Koparkhairane Station Road': 146, 'Kopar Khairane Sector 19A': 144, 'Koper Khairane': 147, 'Eastern Express Highway Vikhroli': 71, 'Magathane': 160, 'Rawal Pada': 235, 'Ambernath East': 8, 'Dokali Pada': 66, 'Dattapada': 59, 'Rajendra Nagar': 231, 'Kulupwadi': 150, 'Samata Nagar Thakur Village': 242, 'Mira Road and Beyond': 180, 'West Amardeep Colony': 383, 'Pant Nagar': 214, 'mumbai': 399, 'Four Bungalows': 72, 'no 9': 400, 'kolshet': 396, 'Hiranandani Meadows': 100, 'Kalpataru': 111, 'Petali': 221, 'Kharghar Sector 34C': 137, 'Ghatkopar East': 78, 'Mumbai Agra National Highway': 185, 'vasant vihar thane west': 408, 'Kalyan West': 115, 'Shirgaon': 320, 'Pokhran 2': 225, 'juhu tara': 393, 'Peddar Road': 220, 'Palm Beach': 211, 'Sector 10': 249, 'Sector 19 Kamothe': 263, 'Tilak Nagar': 343, 'Ghatkopar West': 79, 'Tardeo': 336, 'Napeansea Road': 194, 'Mahalaxmi': 161, 'Dahisar West': 58, 'Mulund West': 184, 'Natakwala Lane': 195, 'Link Road': 154, 'Devidas Cross Lane': 61, 'Soniwadi Road': 326, 'Haridas Nagar': 97, 'Shimpoli': 319, 'TPS Road': 332, 'Off Shimpoli road': 202, 'Rustomjee Global City': 237, 'Sunil Nagar': 330, 'Sector 30 Kharghar': 276, 'Sector 12 A': 255, 'Sector 18': 260, 'Sector13 Khanda Colony': 304, 'Sector16 Airoli': 306, 'Ranjanpada': 233, 'Sector 15': 257, 'Sector 35G': 277, 'Sector 5': 281, 'Sector 35I Kharghar': 278, 'Sector35D Kharghar': 309, 'Sector34 A Kharghar': 308, 'Sector 30': 275, 'Sector 36 Kharghar': 280, 'Sector 11 Belapur': 252, 'Sector-34B Kharghar': 293, 'Dombivali East': 68, 'Roadpali': 236, 'Sector-50 Seawoods': 296, 'Mumbai Highway': 187, 'Sector 7 Kharghar': 285, 'Lokhandwala Township': 156, 'Andheri': 13, 'Andheri West': 15, 'Shastri Nagar': 316, 'Wadala East Wadala': 381, 'Kalwa': 112, 'PARSIK NAGAR': 205, 'Maharashtra Nagar': 162, 'Patlipada': 219, 'Belapur': 27, 'Seawoods': 248, 'Majiwada': 165, '4 Bunglows': 1, 'Airoli': 4, 'Kolshet Road': 142, 'Sector 10 Khanda Colony': 251, 'Pokharan Road': 224, 'Kharegaon': 135, 'Panch Pakhadi': 212, 'Sector 36 Kamothe': 279, 'Dombivli (West)': 69, 'DN Nagar Road': 52, 'Godrej Hill': 82, 'Ganesh Nagar': 75, 'Haware City': 98, 'Mahatma Gandhi Road': 163, 'Akurli Nagar': 5, 'Kasar vadavali': 128, 'Vasai West': 356, 'Mumbai Nashik Expressway': 188, 'Katrap': 130, 'Mira Road': 178, 'Kasheli': 129, 'Western Express Highway Kandivali East': 384, 'Vasind': 360, 'KASHELI': 109, 'Thakurli': 339, 'Shakti Nagar': 315, 'Bhayandar East': 31, 'Dahisar East': 56, 'ulhasnagar 4': 407, 'Sector-26 Taloja': 291, 'Koproli': 148, 'Mumbai Central': 186, 'Greater Khanda': 90, 'link road borivali west': 397, 'Manpada': 171, 'Sector 2 Ulwe': 267, 'Govind nagar': 88, 'Krishanlal Marwah Marg': 149, 'Sector-9 Ulwe': 301, 'Vikhroli': 366, 'Kalamboli': 110, 'Lokhandwala': 155, 'Patel Nagar': 218, 'Yari Road': 388, 'Thakur complex': 338, 'Khar West': 134, 'Sector 11 Kharghar': 254, 'Ghansoli': 76, 'Sector8 Sanpada': 310, 'Jeejamata Nagar': 105, 'Pandurangwadi': 213, 'Shreyas Colony': 323, 'Kannamwar Nagar II': 122, 'gokuldham': 392, 'Bangur Nagar': 26, 'Shivaji Colony': 322, 'Jawahar Nagar': 104, 'Vedant Complex': 362, 'Titwala': 345, 'Manvel pada Road': 173, 'Govandi': 87, 'Shilphata Road Thane': 318, 'Vasant Vihar': 358, 'Thakur Village': 337, 'Samata nagar': 243, 'Wadi Bandar': 382, 'Kapurbawadi': 124, 'Thane Belapur Road Kalwa': 341, 'Suburbs Mumbai': 328, 'Ramdev Park': 232, 'Sector-35 Kamothe': 294, 'Sector 58A Seawoods Navi Mumbai': 283, 'Diva': 64, 'Borivali': 37, 'Gundavali Gaothan': 93, 'Kondivita Road': 143, 'Koldongri': 140, 'Saki Naka': 241, 'Bhayandar West': 32, 'Versova': 363, 'Hanuman Nagar': 96, 'worli sea face ': 412, 'Sea Face': 247, 'Shiv Sagar Estate': 321, 'Grant Road West': 89, 'Sriprastha': 327, 'Off Nepean Sea Road': 201, 'Morya Nagar': 181, 'Upper Worli': 349, 'worli sea Fase': 411, 'Powai': 228, 'Agripada': 3, 'Sion': 325, 'Girgaon': 81, 'IT Colony': 102, 'Bhayandarpada': 33, 'Sector-24 Kamothe': 290, 'Phase 2': 222, 'Sector 6': 284, 'Malad': 168, 'Haji Ali': 94, 'Majiwada thane': 166, 'Yogi Hills': 389, 'Sector 19 Nerul': 265, 'Owale': 204, 'MG Road': 158, 'roadpali navimumbai': 402, 'Taloja Bypass Nitalas Link Road': 334, 'Rasayani': 234, 'Sector 10 Kamothe': 250, 'kavesar': 395, 'Kopara': 145, 'royal palms goregaon east': 403, 'Dadar West': 54, 'vrindavan society': 410, 'CBD Belapur East': 42, 'Parel Village': 217, 'Karave Nagar': 126, 'Sector 19A Nerul': 266, 'Antop Hill': 17, 'Suman Nagar': 329, 'Bhakti Park': 29, 'Hanuman Chowk': 95, 'Willingdon': 385, 'VishnuNagar': 376, 'Vichumbe': 364, 'Vashi': 359, 'Poonam Sagar Complex': 227, 'Santacruz East': 245, 'Mulund East': 183, 'Sector-8 Sanpada': 298, 'Sector-9 Ghansoli': 300, 'Balkum': 22, 'Hiranandani Estates': 99, 'Vartak Nagar': 354, 'Charkop': 45, 'dhanukarwadi': 391, 'Vazira': 361, 'Four Bunglows': 73, 'Palava': 207, 'Oshiwara Police Station Road': 203, 'Seven Bunglow': 313, 'Poddar Road': 223, 'Gulmohar Road': 92, 'Vile Parle E': 370, 'Pokhran Road No 2': 226, 'Sainath Nagar': 240, 'Kapur Bawdi': 123, 'Manpada near Tiku ji ni wadi': 172, 'Kolshet Industrial Area': 141, 'Sector16 Ulwe': 307, 'Anand Nagar Thane West': 12, 'Charkop Sector 8': 46, 'Vile Parle': 369, 'Marine Lines': 174, 'Bandra Kurla Complex': 24, 'sec 50 new': 404, 'Vakola Pipeline Road': 352, 'Neral': 197, 'Shil Phata': 317, 'Ville Parle East': 371, 'matunga east': 398, 'Dharavi': 62, 'vile parle west': 409, 'Anjurdive': 16, 'Uran': 350, 'Boisar': 36, 'Kanjurmarg East': 121, 'Kurla West': 153, 'Sewri': 314, 'Matunga': 176, 'Goregaon (East)': 84, 'Malabar Hill': 167, 'Ambivali': 10, 'Nalasopara East': 192, 'Vijay Nagar': 365, 'Chedda Nagar': 47, 'Kurla East': 152, 'Kharodi': 138, 'Ville Parle West': 372, 'Vikhroli West': 367, 'Wadala East': 380, 'Palidevad': 210, 'Vikroli East': 368, 'Mahim': 164, 'Khalapur': 132, 'Karjat': 127, 'Vitthalwadi': 377, 'Bhoiwada Kalyan': 35, 'Beturkar Pada': 28, 'Ambivli': 11, 'Nilje Gaon': 200, 'Khopoli': 139, 'Taloje': 335, 'Gulal Wadi': 91, 'Tilak Nagar Mumbai': 344, 'Chandivali': 44, 'Nere': 198, 'Kewale': 131, 'Sector 9 Airoli': 286, 'Diva Gaon': 65, 'Sen Nagar': 312, 'Adaigaon': 2, 'Syndicate': 331, 'Gandhar Nagar': 74, 'Byculla': 41, 'Padle Gaon': 206}
    x = [Area,loc[Location],bhk,Gymnasium,Lift]
    x = np.array(x)
    features = ['Area', 'Location', 'No. of Bedrooms', 'Gymnasium', 'Lift Available']
    x = pd.DataFrame([x], columns=features)
    return str(model.predict(x)[0])

if __name__ == '__main__':
    app.run(debug=True, port=5173)
